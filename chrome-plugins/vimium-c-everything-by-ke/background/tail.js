"use strict";r.yt(200,function(){function t(t){if(B||t.v||(t.v=V.b(t.u)),null==t.textSplit){t.title=n(t.title);var e=t.t,r=i(e);t.t=e.length!==t.u.length?r:"",t.textSplit=s(r,o(r),e.length-r.length,B?p-13-Math.min(t.title.length,40):p)}else t.t===t.u&&(t.t="")}function n(t){var n=t.length>p+40;return n&&(t=r.ea(t,0,p+39)),e(n?t+"\u2026":t,o(t))}function e(t,n){var e,i,o,u,l;if(0===n.length)return r.ta(t);for(e="",i=0,o=0;o<n.length;o+=2)u=n[o],l=n[o+1],e+=r.ta(t.slice(i,u)),e+="<match>",e+=r.ta(t.slice(u,l)),e+="</match>",i=l;return e+r.ta(t.slice(i))}function i(t){var n=r.oc(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function o(t){var n,e,i,r,o,l,s,f,c,a,_,g=[];for(n=0,e=k.length;n<e;n++)for(i=0,r=0,o=void 0,s=(l=t.split(Q.tf[n])).length-1,f=k[n].length;i<s;i++,r=o)o=(r+=l[i].length)+f,g.push([r,o]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(u),c=g[0],n=1,a=1,e=g.length;a<e;a++)c[n]>=(_=g[a])[0]?c[n]<_[1]&&(c[n]=_[1]):(c.push(_[0],_[1]),n+=2);return c}function u(t,n){return t[0]-n[0]}function s(t,n,e,i){var o,u,l,s,f,c="",a=t.length,_=a,g="";if(a<=i||(e>1?_=t.indexOf("/")+1||a:(_=t.indexOf(":"))<0?_=a:r.pa.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||a:_+=22),_<a&&n.length)for(o=n.length,u=a+8;(o-=2)>-4&&u>=_;u=o<0?0:n[o])if(l=o<0?_:n[o+1],(s=u-20-Math.max(l,_))>0&&(a-=s)<=i){_=l+(i-a);break}for(a=0,o=0;a<i&&o<n.length;o+=2)(s=(u=n[o])-20-(f=Math.max(a,_)))>0?(i+=s,g=r.ea(t,a,f+11),c+=r.ta(g),c+="\u2026",g=r.ra(t,u-8,u),c+=r.ta(g)):a<u&&(g=t.slice(a,u),c+=r.ta(g)),g=t.slice(u,a=n[o+1]),c+="<match>",c+=r.ta(g),c+="</match>";return t.length<=i?(g=t.slice(a),c+r.ta(g)):(g=r.ea(t,a,i-1>a?i-1:a+10),c+r.ta(g)+"\u2026")}function c(t){return $.nf(t.t,t.title)}function a(t){var n=(t-$.ef)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var i=a(e),r=$.nf(t,n);return i<=r?r:(r+i)/2}function g(t,n){return n}var v=0,h=null,S=false,B=false,U=0,p=0,y=0,b=0,T=0,w=0,k=[""],x="",C="",R="",M=false,E="",O=0,D=null,N=true,I=function(t,n,e,i,r,o){this.e=t,this.u=n,this.t=e,this.title=i,this.r=r(this,o)},j=performance,P={if:[],rf:[],of:null,uf:"",lf:0,iu:0,Ps:function(t,n){if(0!==k.length&&1&O)2===P.iu?P.sf():P.of=t;else if(q.ff([],1),n)return;0===P.iu&&P.cf()},af:function(t){return 47===t.charCodeAt(0)},sf:function(){var t,e,i,r,o,l,s,f,c,a,_=k.some(P.af),m=!!G._f,d=[],v=G.gf&&G.gf.if||P.if,h=v.length,S=[];for(e=0;e<h;e++)$.mf((i=v[e]).df,_?i.uf:i.vf)&&(N||i.hf)&&(m&&d.push(i),S.push([-$.nf(i.df,i.vf),e]));for(m&&(G._f.if=d),T+=t=S.length,t?(S.sort(u),w>0&&!(6&O)?(S=S.slice(w,w+y),w=0):t>w+y&&(S.length=w+y)):O^=1,r=[],o=64&U?-.6664465595617282:0,l=0,s=S;l<s.length;l++)c=(f=s[l])[0],o&&(c=o>c?c:(c+o)/2),a=new I("bookm",(i=v[e=f[1]]).Wa,i.df,_?i.uf:i.vf,g,-c),r.push(a),null!==i.Sf&&(a.u=i.Sf,a.title=n(a.title),a.textSplit="javascript: \u2026",a.t=i.Bf);q.ff(r,1)},Uf:function(){var t=chrome.bookmarks;t.onCreated.addListener(P.pf),t.onRemoved.addListener(P.yf),t.onChanged.addListener(P.yf),t.onMoved.addListener(P.pf),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(P.pf)}),t.onImportEnded.addListener(function(){var t=P.pf;chrome.bookmarks.onCreated.addListener(t),t()})},cf:function(){P.iu=1,P.Ne&&(clearTimeout(P.Ne),P.Ne=0),chrome.bookmarks.getTree(P.bf)},bf:function(t){P.iu=2,P.if=[],P.rf=[],G.gt(2),t.forEach(P.Tf,P);var n=P.of;if(P.of=null,setTimeout(function(){return X.wf(P.if)},50),P.Uf&&(setTimeout(P.Uf,0),P.Uf=null),n&&!n.o)return P.sf()},Tf:function(t){var n,e,i,o,u=t.title,l=t.id,s=P.uf+"/"+(u||l);if(t.children)return P.rf.push(l),n=P.uf,2<++P.lf&&(P.uf=s),t.children.forEach(P.Tf,P),--P.lf,void(P.uf=n);o=(e=t.url).startsWith(i="javascript:"),P.if.push({kf:l,uf:s,vf:u||l,df:o?i:e,hf:D?z.xf(e,u):1,Wa:o?i:e,Sf:o?e:null,Bf:o?r._a(e):null})},Ne:0,Cf:0,Rf:false,Mf:function(){var t=j.now()-P.Cf;0===P.iu&&(t>=6e4||t<-5e3?(P.Ne=P.Cf=0,P.Rf=false,P.cf()):(P.if=[],P.rf=[],P.Ne=setTimeout(P.Mf,3e4),G.gt(2)))},pf:function(){P.Cf=j.now(),P.iu<2||(P.Ne=setTimeout(P.Mf,6e4),P.iu=0)},yf:function(t,n){for(var e,i,r,o,u,l,s,f=P.if,c=f.length,a=n&&n.title,_=0;_<c&&f[_].kf!==t;_++);if(_<c)return i=(e=f[_]).Wa,r=n&&n.url,X.Fl&&(null==a?i!==e.df||!n:null!=r&&i!==r)&&i in X.Ef&&H.Of(i)<0&&delete X.Ef[i],void(null!=a?(e.uf=e.uf.slice(0,-e.vf.length)+(a||e.kf),e.vf=a||e.kf,r&&(e.Wa=r,e.df=X.pr(r,e),X.Df()),D&&(e.hf=z.xf(e.Wa,e.vf))):(f.splice(_,1),n||P.pf()));if(!(P.rf.indexOf(t)<0)){if(null!=a)return P.pf();if(!P.Rf&&X.Fl){for(o=X.Ef,u=H.Of,l=0,s=f;l<s.length;l++)(i=s[l].Wa)in o&&u(i)<0&&delete o[i];P.Rf=false}return P.pf()}}},F={Ps:function(t,n){var e,i,r,o,u,l;if(!(2&O))return q.ff([],2);if(i=k.length>0,e=H.Nf){if(i)return q.ff(F.If(e),2);(H.jf>10||H.Pf>0)&&H.Ff()}else if(r=i?function(n){if(!t.o)return q.ff(F.If(n),2)}:null,i&&(B||H.Jf)?(H.Jf>0&&clearTimeout(H.Jf),H.Jf=0,H.Lf(r)):(H.Jf||(H.Jf=setTimeout(function(){H.Jf=0,H.Lf(r)},i?200:150)),i&&q.Vf((l=(u=(o=q.qf).length)>0)&&"search"===o[0].t?[o[0]]:[],S&&l,0,0,u)),i)return;S=false,0===n?q.Af(F.$f,t):chrome.sessions?chrome.sessions.getRecentlyClosed(F.Wf.bind(F,t)):F.Qf([],t,{},0,0)},If:function(t){var n,e,i,o=1===k.length&&("."===k[0][0]?/^\.\w+$/.test(k[0]):(r.ba(k[0],null,-2),r.ga<=2)),u=!(G.gf&&G.gf.Nf),l=!!G._f,s=[],f=[-1.1,-1.1],c=[],m=$.mf,d=Q.tf[0],v=y+w,h=-1.1,S=0,B=0,U=0;for(E&&v++,B=v;--B;)f.push(-1.1,-1.1);for(v=2*v-2,u||(t=G.gf.Nf),n=t.length;S<n;S++)if(e=t[S],(o?d.test(e.df):m(e.df,e.vf))&&(N||e.hf)&&(l&&s.push(e),U++,!(h>=(i=o?a(e.Hf)||1e-16*e.Hf:_(e.df,e.vf,e.Hf))))){for(B=v-2;0<=B&&f[B]<i;B-=2)f[B+2]=f[B],f[B+3]=f[B+1];f[B+2]=i,f[B+3]=S,h=f[v]}for(l&&(G._f.Nf=s),T+=U,U||(O^=2),5&O?S=0:(S=2*w,w=0);S<=v&&!((i=f[S])<=0);S+=2)(e=t[f[S+1]]).Wa!==E?c.push(new I("history",e.Wa,e.df,e.vf,g,i)):v--;return X.Df(),c},$f:function(t,n){var e,i,o,u,l,s;if(G.zf(n),!t.o){for(e=r.sa(),i=0,o=0,u=n;o<u.length;o++)s=(l=u[o]).url,l.incognito&&h||s in e||(e[s]=1,i++);return F.Qf([],t,e,w,i)}},Wf:function(t,n){var e,i,r;if(!t.o)return e=[],i={},r=-w,n.some(function(t){var n,o,u=t.tab;return!(!u||((n=u.url).length>2e3&&(u.url=n=H.Gf(n,u)),!N&&!z.xf(n,u.title)||(o=n+"\n"+u.title)in i||(i[o]=1,i[n]=1,++r>0&&e.push(u),!(e.length>=y))))})?F.Kf(e):F.Qf(e,t,i,-r,0)},Qf:function(t,n,e,i,r){chrome.history.search({text:"",maxResults:w+y*(N?1:2)+r},function(r){if(!n.o)return r=r.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=H.Gf(n,t)),!(n in this)},e),N||(r=r.filter(function(t){return z.xf(t.url,t.title||"")})),i<0?(r.length=Math.min(r.length,y-t.length),r=t.concat(r)):i>0&&(r=r.slice(i,i+y)),F.Kf(r)})},Kf:function(t){t.forEach(F.Xf),w=0,X.Df(),q.ff(t,2)},Xf:function(t,n,e){var i=t.url,r=new I("history",i,X.pr(i,i),t.title||"",g,(99-n)/100),o=t.sessionId;o&&(r.s=o,r.label="&#8617;"),e[n]=r}},J={Ps:function(t,n){if(1!==k.length||!(16&O)||k[0].lastIndexOf("/",k[0].length-2)>=0)return q.ff([],16);if(H.fa);else{if(!H.Nf)return n>0?q.ff([],16):H.Lf(function(){if(!t.o)return J.Ps(t,0)});J.cf(H.Nf)}return J.sf()},sf:function(){var n,e,i,o,u,l,s,f,c,a,m,d,v,h,B,U=r.fa,p=$.Yf,b=k[0].replace("/","").toLowerCase(),x="",C=-1.1;for(i in $.Yf=3,U)i.includes(b)&&(e=U[i],(N||e.de>0)&&(o=_(i,"",e.Hf))>C&&(C=o,x=i));u=x.length===b.length,x&&!u&&(x.startsWith("www.")||x.startsWith(b)||(l=x.slice(x.indexOf(".")+1)).includes(b)&&(void 0,(s=U[l="www."+l])&&(N||s.de>0)&&(x=l,e=s)),(f=x.startsWith(b)?0:x.startsWith("www."+b)?4:-1)>=0&&(d=(a=(c=r.Ma(x))[0]).length-1,(m=c[1])>1&&(!(f=x.length-f-b.length-a[d].length-1)||3===m&&f===a[d-1].length+1)&&(u=true))),x&&(T++,E=v=(e.Ia?"https://":"http://")+x+"/",w>0?w--:(S=u||S,t(n=new I("domain",v,b===k[0]?x:x+"/","",g,2)),(B=(h=H.Zf?H.Of(v):-1)>0?H.Nf[h]:null)&&(N||B.hf)&&(n.title=r.ta(B.vf)),--y)),$.Yf=p,q.ff(n?[n]:[],16)},cf:function(t){var n,e,i,o,u,l,s,f,c,a,_;for(J.cf=null,n=J.T_,e=H.fa=r.fa,i=0,o=t;i<o.length;i++)l=(u=o[i]).Hf,s=u.hf,(f=n(u.Wa))&&(a=f.x_,(_=e[c=f.R_])?(_.Hf<l&&(_.Hf=l),_.de+=s,a>=7&&(_.Ia=8===a?1:0)):e[c]={Hf:l,de:s,Ia:8===a?1:0})},T_:function(t){var n,e,i=t.lastIndexOf(":",5),r=i>0?t.slice(0,i):"";if("http"===r)n=7;else if("https"===r)n=8;else{if("ftp"!==r)return null;n=6}return e=t.indexOf("/",n),{R_:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",x_:n}}},L={Ps:function(t,n){!(4&O)||n&&(!k.length||32&U)?q.ff([],4):q.Af(L.sf,t)},sf:function(t,n){var e,i,o,u,l,s,f,a,_,g,d,v,S,p,x,C,R,E,D,N,j,P,F,J,V,A,W,Q,H,z,K,Y,Z,tt,nt,et,it;if(G.zf(n),!t.o){if(e=m.ml,i=k.length<=0,o=3&O,l=[],(u=!!(8&U)&&M&&i&&!B)&&n.length>w){for(s=r.sa(),a=0,_=n;a<_.length;a++)s[(g=_[a]).id]=g;if(n.length>b){for(p=(S=(v=(d=s[e])?d.openerTabId:0)?s[v]:null)?S.index:d?d.index-1:0,x=S?0:b/2|0;1<--x&&p>0&&n[p-1].openerTabId===v;p--);n=p>0?n.slice(p).concat(n.slice(0,p)):n}}for(C=[],R=[],E=0,D=n;E<D.length;E++)g=D[E],!M&&h&&g.incognito||(N=g.url,j=g.text||(g.text=X.pr(N,g.incognito?"":N)),(i||$.mf(j,g.title))&&(P=g.windowId,!M&&R.lastIndexOf(P)<0&&R.push(P),C.push(g)));if(T+=f=C.length,f||(O^=4),w>=f&&!o)return w=0,q.ff(l,4);if(R.sort(L.M_),F=i?u?L.E_:L.O_:c,J=u?r.sa():null,V=R.length>1?m.ks:0,A=0,u)for(W=0,Q=C;W<Q.length;W++)J[(g=Q[W]).id]=(z=(H=g.openerTabId)&&J[H])?z<5?z+1:5:1;for(K=0,Y=C;K<Y.length;K++)g=Y[K],Z="#",V&&g.windowId!==V&&(Z+=R.indexOf(g.windowId)+1+":"),Z+=g.index+1,!h&&g.incognito&&(Z+="*"),g.discarded&&(Z+="~"),tt=g.id,nt=u?J[tt]:1,et=new I("tab",g.url,g.text,g.title,F,u?++A:tt),e===tt&&(u||(et.r=i?1<<31:0),Z="#("+Z.slice(1)+")"),et.s=tt,et.label=Z,nt>1&&(et.level=" level-"+nt),l.push(et);if(l.sort(q.D_),it=l.length,o||it>w+y||!i)for(w>0&&!o?(l=l.slice(w,w+y),it=y,w=0):it>w+y&&(l.length=it=w+y),x=o?0:it;x<it;x++)l[x].r*=8/(x/4+1);else if(w>0){for(it=(l=l.slice(w).concat(l.slice(0,y+w-it))).length,x=0;x<it;x++)l[x].r=it-x;w=0}X.Df(),q.ff(l,4)}},M_:function(t,n){return t-n},O_:function(t,n){return m.Rs[n]||(4&U?2047+n:-n)},E_:function(t,n){return 1/n}},V={Ua:0,Ps:r.x,N_:function(t,n){var e,i,o,u,s,f,c,a,_,g;if(!(8&O))return q.ff([],8);if(o=(i=k).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===o[0]&&"\\"!==o[1])return o.length>1?i[0]=o.slice(1):i.shift(),o=C.slice(1).trimLeft(),e=V.j_(o),N=N&&z.P_([o]),q.ff([e],8);u=l._.searchEngineMap[o]}if(true===n){if(!u)return true}else{if(!u&&!o.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?V.F_():-1),q.ff([],8);u&&R&&(i.push(R),w=0),i.length>1||!u||(v=-1)}if(i.length>1&&u?(i.shift(),C.length>200&&(i=C.split(" ")).shift()):u&&(i=[]),N=N&&z.P_([o]),u?(c=s=(a=r.Ka(i,u.Wa,u.x,[])).Wa,f=a.Ga):(c=s=i.join(" "),f=[]),"~"===o);else if(s.startsWith("vimium://")){if(_=r.wa(s.slice(9),1,true),g=V.J_.bind(V,i,s,c,u,f),_ instanceof Promise)return _.then(V.L_.bind(V,t,g));if(_ instanceof Array)return V.L_(t,g,_);_&&(s=c=_,f=[])}else s=r.ba(s,null,-2);return e=V.J_(i,s,c,u,f),q.ff([e],8)},L_:function(t,n,e){var i,o,u,l,s;switch(t.o?"":e[1]){case 5:case 6:if(!(o=e[0]))break;return C="\\ "+o,R="",o=o.length>200?o.slice(0,200).trim():o,(k=o.split(" ")).length>1&&(k[1]=r.Ya(k[1])),V.N_(t);case 2:if(k=(u=e[0]).length>1||1===u.length&&u[0]?u:k,(l=V.Ua++)>12)break;if(s=V.N_(t,true),l<=0&&(V.Ua=0),true!==s)return s;case 0:e[0]&&(i=V.V_(n(),e))}q.ff(i||[n()],8)},J_:function(t,n,o,u,l){var s=new I("search",n,o,(u?u.Xa+": ":"")+t.join(" "),g,9);return t.length>0&&u?(s.t=V.q_(o,l),s.title=e(s.title,[u.Xa.length+2,s.title.length]),s.textSplit=e(s.t,l)):(s.t=r._a(i(o)),s.title=r.ta(s.title),s.textSplit=r.ta(s.t)),B||(s.v=u&&u.x||V.b(n)),s.p=u?u.Xa:"",s},V_:function(t,n){var e=n[0],i=new I("math","vimium://copy "+e,e,e,g,9);return--i.r,i.title='<match style="text-decoration: none;">'+r.ta(i.title)+"<match>",i.textSplit=r.ta(n[2]),[t,i]},b:function(t){for(var n=H.Zf&&t.startsWith("http")?H.Of(t):-1,e=n<0?~n-1:n,i=e<0?[]:H.Nf,r=t.indexOf(":")+3,o=0,u=0,l="",s="",f=0,c=0;o<=e&&(r="/"===t[r]?r+1:t.indexOf("/",r+1)+(u?0:1))>0;u=r){for(l=t.slice(u,r),c=e;o<=c;)if((s=i[f=o+c>>>1].Wa.slice(u))>l)c=f-1;else{if(s===l)return u?i[f].Wa:"";o=f+1}if(o<=e&&u&&"/"===(l=i[o].Wa)[r]&&l.length<=++r)return l}return""},A_:0,v_:0,F_:function(){var t=k[0],n=l._.searchKeywords;return null==n?(V.v_=V.v_||setTimeout(V.W_,67),-2):t.length>=V.A_?0:n.includes("\n"+t)?-2:0},q_:function(t,n){var e,i,o,u=n.length;if(i=r._a(n.length>0?t.slice(0,n[0]):t),(e=r.oc(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(o=n[0];n[e]=i.length,u>++e;)i+=r._a(t.slice(o,n[e])),o=n[e];return o<t.length&&(i+=r._a(t.slice(o))),i},j_:function(t){var n=r.ba(t,null,-2),o=4===r.ga,u=new I("search",n,r._a(i(n)),"",g,9);return u.title=o?"~: "+e(t,[0,t.length]):r.ta(t),u.textSplit=r.ta(u.t),B||(u.v=V.b(n)),u.p=o?"~":"",u},W_:function(){var t,n,e,i=Object.keys(l._.searchEngineMap),r=0;for(n=0,e=i;n<e.length;n++)r<(t=e[n].length)&&(r=t);l.Pc("searchKeywords","\n"+i.join("\n")),V.A_=r,V.v_=0}},q={Q_:0,H_:0,qf:null,z_:null,Vf:null,Ps:function(t){var n,e,i,r;if(q.z_&&(q.z_.o=true),n=q.z_={o:false},q.H_=0,e=1,i=-9&(O&=t[0])?t.length:2,q.qf=[],q.Q_=i-1,v=w&&-1,t[1]===V){if(r=V.N_(n),i<3)return;if(r)return void r.then(q.G_.bind(null,t,n,e));e=2}q.G_(t,n,e)},G_:function(t,n,e){for($.ef=Date.now()-18144e5,$.Yf=3*k.length||.01,k.indexOf("__proto__")>=0&&(k=k.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),G.y_(),k.sort(q.K_),Q.X_();e<t.length;e++)t[e].Ps(n,e-1)},K_:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},Af:function(t,n,e){var i,r;e=e||G.Rs.Rs,i=m.as,null===h&&(i=1!==i?i:f>=52||l.aa.Ul||!!G.Rs.Rs?m.as=0:1),1!==i?(G.Rs.Y_!==(r=((h=2!==i)?2:0)|(M?1:0))&&(G.Rs={Rs:null,Y_:r}),e?t(n,e):chrome.tabs.query(M?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:M},function(e){m.as=h?0:2,n.o||q.Af(t,n,M?e.tabs:null)})},ff:function(t,n){var e=q.qf,i=t.length;if(i>0&&(q.H_|=n,q.qf=0===e.length?t:e.concat(t),8===n&&(S=!0,y-=i,T+=i)),0==--q.Q_)return e=null,q.Z_()},Z_:function(){var n,e,r,o,u,l,s,f,c,a,_=q.qf;return q.qf=null,_.sort(q.D_),w>0?(_=_.slice(w,w+b),w=0):_.length>b&&(_.length=b),Q.tg=Q.ng=null,k.length>0&&(e=i(n=k[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1)&&(k[0]=r?e:n.slice(0,-1),Q.eg())),_.forEach(t),o=_.length>0,u=S&&o,l=T,s=":"===x,c=2!=(f=v<0?-2!==v||o?0:3:N?k.length<=0?0:o?2:s?3:1:0)||s?0:q.H_,a=q.Vf,q.ig(),a(_,u,f,c,l)},ig:function(){q.z_=q.Vf=h=null,k=[],x=C=R=E="",Q.tf=null,$.Yf=3,$.ef=v=q.H_=U=y=b=T=p=0,O=0,S=B=false,M=false,N=true},rg:function(){var t,n,e=C;if(w=0,R="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=C.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))w=n;else if("+"!==e)return;C=C.slice(0,t&&t-1),R=e}},D_:function(t,n){return n.r-t.r}},A={__proto__:null,bookm:[1,P],domain:[16,J],history:[2,F],omni:[63,V,J,F,P,L],search:[8,V],tab:[4,L]},$={mf:function(t,n){var e,i,r=Q.tf;for(e=0,i=k.length;e<i;e++)if(!(r[e].test(t)||r[e].test(n)))return false;return true},Yf:3,og:[0,0],ug:function(t,n){var e,i=0;return(e=n.split(Q.tf[t]).length)<1?$.og:(i=1,Q.ng[t].test(n)&&(i+=1,Q.tg[t].test(n)&&(i+=1)),[i,(e-1)*k[t].length])},nf:function(t,n){var e,i,r,o=0,u=0,l=0,s=0,f=!!n;for(Q.ng||Q.lg(),e=0,i=k.length;e<i;e++)s+=(r=$.ug(e,t))[0],l+=r[1],f&&(u+=(r=$.ug(e,n))[0],o+=r[1]);return s=s/$.Yf*$.sg(l,t.length),0===o?n?s/2:s:s<(u=u/$.Yf*$.sg(o,n.length))?u:(s+u)/2},ef:0,sg:function(t,n){return t<n?t/n:n/t}},W=/[$()*+.?\[\\\]\^{|}]/g,Q={tf:null,ng:null,tg:null,X_:function(){var t,n,e,i=Q.tf=[];for(Q.ng=Q.tg=null,t=0,n=k;t<n.length;t++)e=n[t],i.push(new RegExp(e.replace(W,"\\$&"),r.fc(e)?"":"i"))},lg:function(){var t,n,e,i,o,u=Q.ng=[],l=Q.tg=[];for(t=0,n=k;t<n.length;t++)i="\\b"+(e=n[t]).replace(W,"\\$&"),o=r.fc(e)?"":"i",u.push(new RegExp(i,o)),l.push(new RegExp(i+"\\b",o))},eg:function(){if(Q.tf){var t=k[0];Q.tf[0]=new RegExp(t.replace(W,"\\$&"),r.fc(t)?"":"i")}}},H={fg:0,jf:0,Pf:0,Zf:false,Jf:0,Nf:null,Dl:null,fa:null,Lf:function(t){H.Dl?t&&H.Dl.push(t):(H.Dl=t?[t]:[],H.fg=Date.now(),H.Jf||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(H.cg,0,t)}))},cg:function(t){var n,e,i,r,o,u,l;for(H.cg=null,n=0,e=t.length;n<e;n++)(r=(i=t[n]).url).length>2e3&&(r=H.Gf(r,i)),t[n]={df:r,vf:i.title,Hf:i.lastVisitTime,hf:1,Wa:r};if(D)for(o=0,u=t;o<u.length;o++)0===z.xf((l=u[o]).df,l.vf)&&(l.hf=0);setTimeout(function(){setTimeout(function(){var t,n,e,i,r,o,u,l,s=H.Nf;for(t=s.length-1;0<t;)for(r=(i=(n=s[t]).df=X.pr(e=n.Wa,n)).length>=e.length;0<=--t&&!((u=(o=s[t]).Wa).length>=e.length)&&e.startsWith(u);)o.Wa=e.slice(0,u.length),l=r?u:X.pr(u,o),o.df=r||l.length<u.length?i.slice(0,l.length):l;H.fa||setTimeout(function(){J.cf&&J.cf(H.Nf)},200)},100),H.Nf.sort(function(t,n){return t.Wa>n.Wa?1:-1}),H.Zf=true,chrome.history.onVisitRemoved.addListener(H.ag),chrome.history.onVisited.addListener(H._g)},100),H.Nf=t,H.Lf=function(t){t&&t(H.Nf)},H.Dl&&H.Dl.length>0&&setTimeout(function(t){var n,e;for(n=0,e=t;n<e.length;n++)(0,e[n])(H.Nf)},1,H.Dl),H.Dl=null},_g:function(t){var n,e,i,r,o,u,l,s,f,c=t.url;if(c.length>2e3&&(c=H.Gf(c,t)),n=t.lastVisitTime,e=t.title,i=++H.jf,r=H.fa,(o=H.Of(c))<0&&H.Pf++,(i>59||i>10&&Date.now()-H.fg>3e5)&&H.Ff(),u=o>=0?H.Nf[o]:{df:"",vf:e,Hf:n,hf:D?z.xf(c,e):1,Wa:c},r&&(s=J.T_(c))&&((l=r[s.R_])?(l.Hf=n,o<0&&(l.de+=u.hf),s.x_>=7&&(l.Ia=8===s.x_?1:0)):r[s.R_]={Hf:n,de:u.hf,Ia:8===s.x_?1:0}),o>=0)return u.Hf=n,void(e&&e!==u.vf&&(u.vf=e,G.v_&&G.gt(1),D&&(f=z.xf(c,e),u.hf!==f&&(u.hf=f,l&&(l.de+=f||-1)))));u.df=X.pr(c,u),H.Nf.splice(~o,0,u),G.v_&&G.gt(1)},ag:function(t){var n,e,i,o,u,l,s,f,c,a,_,g,m,d,v;if(X.gg.length=0,n=X.Ef,G.gt(1),t.allHistory){for(H.Nf=[],H.fa&&(H.fa=r.fa=r.sa()),e=r.sa(),i=0,o=P.if;i<o.length;i++)(l=n[(u=o[i]).Wa])&&(e[u.Wa]=l);X.Ef=e}else for(f=(s=H).Of,c=s.Nf,a=s.fa,g=0,m=t.urls;g<m.length;g++)(u=f(d=m[g]))>=0&&(a&&c[u].hf&&(v=J.T_(d))&&(_=a[v.R_])&&--_.de<=0&&delete a[v.R_],c.splice(u,1),delete n[d])},Gf:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),o=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",o&&o.length>160&&(n.title=r.ea(o,0,160)),t},Ff:function(){var t=Date.now();if(H.Pf<=0);else{if(t<H.fg+1e3&&t>=H.fg)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,H.jf+10),startTime:t<H.fg?t-3e5:H.fg},H.mg)}return H.fg=t,H.Pf=H.jf=0,X.Df()},mg:function(t){var n,e,i,r,o,u,l=H.Nf,s=H.Of;if(!(l.length<=0))for(n=0,e=t;n<e.length;n++){if((r=(i=e[n]).url).length>2e3&&(i.url=r=H.Gf(r,i)),(o=s(r))<0)H.Pf--;else if(!(u=i.title)||u===l[o].vf)continue;H.jf--,H._g(i)}},Of:function(t){for(var n="",e=H.Nf,i=e.length-1,r=0,o=0;r<=i;)if((n=e[o=r+i>>>1].Wa)>t)i=o-1;else{if(n===t)return o;r=o+1}return~r}},z={xf:function(t,n){var e,i,r;for(e=0,i=D;e<i.length;e++)if(n.includes(r=i[e])||t.includes(r))return 0;return 1},P_:function(t){var n,e,i,r,o,u;if(!D)return true;for(n=0,e=t;n<e.length;n++)for(i=e[n],r=0,o=D;r<o.length;r++)if(u=(u=o[r]).trim(),i.includes(u)||u.length>9&&i.length+2>=u.length&&u.includes(i))return true;return false},dg:function(){var t,n,e,i,r,o,u,l,s;if(P.if)for(t=0,n=P.if;t<n.length;t++)(e=n[t]).hf=D?z.xf(e.df,e.uf):1;if(H.Nf)for(i=H.fa,r=0,o=H.Nf;r<o.length;r++)e=o[r],u=D?z.xf(e.df,e.vf):1,e.hf!==u&&(e.hf=u,i&&(l=J.T_(e.Wa))&&(s=i[l.R_])&&(s.de+=u||-1))},vg:function(t){var n,e,i,r=[];for(n=0,e=t.split("\n");n<e.length;n++)(i=e[n])&&i.trimLeft().charCodeAt(0)>35&&i.trim()&&r.push(i);D=r.length>0?r:null,(H.Nf||P.if)&&setTimeout(z.dg,100)}},G={gf:null,_f:null,Rs:{Rs:null,Y_:0},hg:[],v_:0,Sg:0,y_:function(){var t,n,e,i,r,o=k,u=null,s=0,f=o.join(" ");for(t=G.hg,n=f?t.length:0;0<=--n;)if(t[n].Bg||!N){for(e=t[n].du,i=0,r=0;i<e.length&&r<o.length;r++)o[r].includes(e[i])&&i++;if(i>=e.length){u=t[n];break}}G.gf=u,u&&(l.Tc.t<200||!u.Nf||u.Nf.length>1e3)&&(s=j.now())-u.Hf<Math.max(300,1.3*l.Tc.t)?(G._f=u,u.du=o.slice(0)):!f||u&&f===u.du.join(" ")||!(f.length>4||/\w\S|[^\x00-\x80]/.test(f))?G._f=null:(G._f={du:o.slice(0),Bg:N,Hf:s||j.now(),Nf:u&&u.Nf,if:u&&u.if},G.hg.push(G._f),G.v_||(G.v_=setInterval(G.Ug,6e3)))},Ug:function(){for(var t=G.hg,n=-1,e=j.now()-5983;++n<t.length&&t[n].Hf<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(G.v_),G.v_=0)},gt:function(t){var n,e,i;for(n=0,e=G.hg;n<e.length;n++)i=e[n],t<2?i.Nf=null:t<3?i.if=null:G.Rs.Rs=null},zf:function(t){G.Rs.Rs!==t&&(G.Sg&&(clearTimeout(G.Sg),G.Sg=0),G.Rs.Rs=t,t&&(G.Sg=setTimeout(G.zf,3e3,null)))}},K=decodeURIComponent,X={pr:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return K(t)}catch(t){}return X.Ef[t]||(n&&X.gg.push(n),t)},wf:function(t){for(var n,e,i=X.Ef,r=X.gg,o=-1,u=t.length;;)try{for(;++o<u;)(n=t[o]).df=(e=n.Wa).length>=400||e.lastIndexOf("%")<0?e:K(e);break}catch(t){n.df=i[e]||(r.push(n),e)}X.Df()},Ef:r.sa(),gg:[],pg:-1,Df:function(){0!==X.gg.length&&-1===X.pg&&(X.pg=0,setTimeout(X.yg,17,null))},yg:function(t){for(var n,e,i,r;X.pg<X.gg.length;X.pg++){if(!(n=X.Ef[r=(i="string"==typeof(e=X.gg[X.pg]))?e:e.Wa]))return t||(t=X.bg())?(t.open("GET",X.Tg+(f>=66?r.replace("#","%25"):r),true),t.send()):(X.gg.length=0,void(X.pg=-1));i||(e.df=n)}},wg:function(){if(!(X.pg<0)){var t=this.responseText,n=X.gg[X.pg++];"string"!=typeof n?X.Ef[n.Wa]=n.df=t:X.Ef[n]=t,X.pg<X.gg.length?X.yg(this):(X.gg.length=0,X.pg=-1)}},Fl:true,Tg:"1",bg:function(){if(!X.Tg)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=X.wg,t},kg:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=X.Tg;e!==i&&(X.Tg=e,n?"1"!==i&&setTimeout(function(){return H.Nf&&X.wf(H.Nf),X.wf(P.if)},100):(X.Ef=r.sa(),X.gg.length=0),X.Fl!==n&&(X.gg=n?[]:{length:0,push:r.x},X.Fl=n,X.pg=-1))}};d={Ps:function(t,n,e){S=false,x=C=(t=t.trim())&&t.replace(r.da," "),q.rg(),k=(t=C)?(t=t.length>200?t.slice(0,200).trimRight():t).split(" "):[],(p=0|n.c||128)&&(p-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),p=Math.max(50,Math.min(p,320)),B=!!(1&(U=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),T=0,q.Vf=e;var i="bomni"===n.o?(U|=64,A.omni):A[n.o],o=k.length>=1?k[0]:"",u=n.t;i===A.tab&&(M=!!(2&U)),S=null!=i&&1===i.length,2===o.length&&":"===o[0]&&(i="b"===(o=o[1])?A.bookm:"h"===o?A.history:"t"===o||"w"===o?(M="w"===o,A.tab):"B"===o?(U|=64,A.omni):"H"===o?(U|=32,A.omni):"d"===o?A.domain:"s"===o?A.search:"o"===o?A.omni:null)&&(S=1===i.length,k.shift(),C=C.slice(3),0!==u&&(i=null)),k.length>0&&(k[0]=r.Ya(k[0])),N=z.P_(k),O=0!==u?u:63,q.Ps(i||A.omni)},zs:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.go();return t||G.zf(null),e(!t),t});break;case"history":var i=!H.Zf||H.Of(t)>=0;chrome.history.deleteUrl({url:t}),i&&G.gt(1),e(i)}},I_:function(){G.Rs.Rs&&(1&G.Rs.Y_||!(2&G.Rs.Y_)!=(2===m.as))&&G.zf(null)}},l.Uc.omniBlockList=z.vg,l.$c("omniBlockList"),f>=39?(l.Uc.localeEncoding=X.kg,l.$c("localeEncoding")):X.kg(""),r.yt(80,function(){l.$c("searchEngines",null)})});var d={Ps:function(t,n,e){r.yt(210,function(){return d.Ps(t,n,e)})},zs:r.x,I_:r.x};r.yt(1e3,function(){function t(){return chrome.storage&&chrome.storage.sync}function n(e,o){function u(t){var n,e,o,u;if(U){for(n in r.Ct(t),U)!(o=(e=n.split(":")[0])===n)&&e in U||i(e,null!=(u=o?U[n]:null)?u.newValue:t[e],t);U=null}}var s,f,c;if("sync"===o){if(r.Ct(e),s=l.Qc&&l.Qc())return U&&r.y(e,U),U=e,void s.then(function(){return n({},o)});for(f in U&&(r.y(e,U),U=null),e){if(c=e[f],8===(f.includes(":")?8:i(f,null!=c?c.newValue:null)))return U=e,void t().get(u);delete e[f]}}}function e(){return(new Date).toLocaleString()}function i(t,n,i){var r,u,s,f,c,_;if(t in l.Mc&&!(t in l.Ec)&&m(t)){if(r=l.Mc[t],u=n&&"object"==typeof n&&n.$_serialize||""){if("split"===u&&!i)return 8;if(8===(n=a(t,n,i)))return}null!=n?(s=y?r:l.Nc(t),(_="object"!=typeof r)?(c=n,f=s):(c=JSON.stringify(n),f=JSON.stringify(s)),c!==f&&(c===(s=_?r:JSON.stringify(r))&&(n=r),y||console.log(e(),"sync.this: update",t,"string"==typeof n?(n.length>32?n.slice(0,30)+"...":n).replace(/\n/g,"\\n"):n),o(t,n))):null!=localStorage.getItem(t)&&(y||console.log(e(),"sync.this: reset",t),o(t,r))}}function o(t,n){var e="keyMappings"===t?"Commands":t.startsWith("exclusion")?"Exclusions":"";if(!e)return u(t,n);Promise.all(["Exclusions"===e&&r.$a("Commands"),r.$a(e)]).then(function(){return u(t,n)}),r.sc()}function u(t,n){var e,i;B=t,l.Pc(t,n),B="",t in l.zc&&(i={N:6,d:(e={},e[t]=l.Nc(t),e)},l.jc(i))}function s(t,n){m(t)&&t!==B&&(S||(setTimeout(g,800),S=r.sa()),S[t]=n)}function f(n,i){var o;t()?chrome.storage.local.set(((o={})[n]=i,o),function(){var t=r.go();if(t)return console.log(e(),"storage.local: Failed to update",n,":",t.message||t),t}):l.Hc=r.x}function c(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})}function a(t,n,i){var r,o,u,s,f="";switch(n.$_serialize){case"split":for(r=n.k,o=n.s,u=0;u<o;u++){if(!(s=i[t+":"+u])||!s.startsWith(r))return 8;f+=s.slice(r.length)}break;case"single":return JSON.parse(c(JSON.stringify(n.d)));default:return console.log(e(),"Error: can not support the data format in synced settings data:",t,":",n.$_serialize),null}return"string"==typeof l.Mc[t]?f=c(f):(f=c(JSON.stringify(f)),JSON.parse(f.slice(1,-1)))}function _(t,n,e){var i,r,o,u,s,f,c,a,_,g,m,d;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(r="",!((i=JSON.stringify(n)).length<8192/6-40))){if(4*(i=i.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})).length<8093)return i;if((r=e.encode(i)).length<8093)return i;for(o=0,u=Date.now().toString(36)+":",s={},i="string"==typeof l.Mc[t]?i.slice(1,-1):(function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})})(i),p||(p=new TextDecoder),f=0,c=(r=e.encode(i)).length;f<c;){for(a=Math.min(f+8134,c),_=void 0,g=0;a<c&&128==(192&r[a]);a--);if((g=(i=(_=p.decode(r.subarray(f,a))).slice(-6)).lastIndexOf("\\"))>i.length-2)_+="b",g=1;else if(g>0&&"u"===i[g+1])for(m=g=i.length-g;m++<6;_+="b");else g=0;if(_=JSON.parse('"'+_+'"'),g&&((d=_.endsWith("b"))||(a-=g),_=_.slice(0,g>1&&d?g-6:-1)),s[t+":"+o++]=u+_,f=a,o>=13)break}return s[t]={$_serialize:"split",k:u,s:o},s}}function g(){var n,i,o,u,f,c,a,g=S,m=[],d=[],v=[],h=r.sa(),B={};if(S=null,g&&l.Hc===s){for(i in n=new TextEncoder,g)for(o=g[i],f="string"==typeof(u=l.Mc[i])||"object"==typeof u&&"vimSync"!==i?0:13,null!=o?(c=_(i,o,n))&&"object"==typeof c?(h[i]=c,f=c[i].s):(B[i]=c?{$_serialize:"single",d:JSON.parse(c)}:o,d.push(i)):(v.push(i),m.push(i));f<13;f++)v.push(i+":"+f);for(i in p=n=null,m.length>0&&console.log(e(),"sync.cloud: reset",m.join(", ")),v.length>0&&t().remove(v),d.length>0&&(console.log(e(),"sync.cloud: update",d.join(", ")),t().set(B)),a=function(n){t().set(h[n],function(){var t=r.go();return t?console.log(e(),"Failed to update",n,":",t.message||t):console.log(e(),"sync.cloud: update (serialized) "+n),t})},h)a(i)}}function m(t){return!(t in T)}function d(t){l.mc.hc=null,r.yt(t,function(){chrome.storage.local.get(function(t){var n,i,o,u,s,c,a,_,g;if(!l.Nc("vimSync")&&localStorage.length){for(console.log(e(),"storage.local: backup all settings from localStorage"),r.Ct(t),n=0,i=localStorage.length;n<i;n++)(o=localStorage.key(n))in l.Mc&&(m(o)||"keyboard"===o)&&(u=l.Mc[o],s=t[o],a=c=l.Nc(o),_=s,"object"==typeof u&&(_=JSON.stringify(s),a=JSON.stringify(c)),a!==_&&f(o,c),delete t[o]);(g=Object.keys(t)).length>0&&chrome.storage.local.remove(g)}})})}function v(o,u,s){var c,a,_,g,d,v,h,S,U,p,T,w,k,x;if(2&u&&chrome.storage.local.get(function(t){var n,i,o,f=r.go();if(f)return l.Qc=null,(u-=2)||s(),f;for(o in r.Ct(t),i=void 0!==(n=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,i&&console.log(e(),"storage.local: restore settings to localStorage"),t)o in l.Mc&&(B=o,l.Pc(o,t[o]));B="",null!=n&&l.Pc("vimSync",n),r.yt(100,function(){l.jc({N:6,d:l.Sc})}),(u-=2)||s()}),2!==u){if(r.Ct(o),!(c=o.vimSync||l.Nc("vimSync")))return b=c,l.Hc=f,void(--u||s());for(_ in o.vimSync||(console.log(e(),"sync.cloud: enable vimSync"),o.vimSync=c,t().set({vimSync:c})),a=[],o)_ in l.Yc&&a.push(_);for(g=[],d={},v=0,h=a;v<h.length;v++)for(_=h[v],S=l.Yc[_],U=-1,p=void 0;U<13&&(p=U<0?_:_+":"+U)in o;U++)d[T=U<0?S:S+":"+U]=o[T]=o[p],delete o[p],g.push(p);for(a.length>0&&(chrome.storage.onChanged.removeListener(n),l.Hc=r.x,t().remove(g),t().set(d,r.go),a.length=0),U=0,w=localStorage.length;U<w;U++)!((_=localStorage.key(U))in o)&&_ in l.Mc&&m(_)&&a.push(_);for(k=0,x=a;k<x.length;k++)i(_=x[k],null);for(_ in o)_.includes(":")||i(_,o[_],o);l.$c("vimSync"),r.yt(4,function(){--u||s()}),y&&console.log(e(),"sync.cloud: download settings to localStorage")}}var h,S=null,B="",U=null,p=null,y=null,b=l.Nc("vimSync"),T=r.Ct({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1});if(l.Uc.vimSync=function(e){if(b=e,t()){var i=chrome.storage.onChanged;if(!e)return i.removeListener(n),void(l.Hc!==f&&(l.Hc=f,d(600)));l.Hc!==s&&(i.addListener(n),l.Hc=s,chrome.storage.local.clear())}},l.Qc=function(){if(y);else{if(localStorage.length)return null;r.sc(),y=Promise.all([r.$a("Commands"),r.$a("Exclusions")]).then(function(){return new Promise(function(n){b?t().get(function(t){var e=r.go();return e?(l.Qc=null,n()):v(t,1,n),e}):v({},2,n)}).then(function(){y=null})})}return y},false===b||!b&&!l.mc.dc)return h=l.mc.hc,l.mc.hc=h?null:d,h&&d(6e3),void(l.Hc=f);r.sc(),t()?t().get(function(t){var n=r.go();if(n)return console.log(e(),"Error: failed to get storage:",n,"\n\tSo disable syncing temporarily."),l.Uc.vimSync=l.Hc=r.x,l.Qc=null,n;y=Promise.resolve(),y=new Promise(function(n){return v(t,3,n)}).then(function(){y=null})}):l.Qc=null}),r.yt(150,function(){var t,e,o,u;chrome.browserAction&&(true,o=l.Uc.showActionIcon,u=function(n){var i,o=l.Zc[n];(i=new XMLHttpRequest).open("GET",o,true),i.responseType="arraybuffer",i.onload=function(){(function(i){var o,u,l,s=new Uint8ClampedArray(i),f=i.byteLength/5,c=0|Math.sqrt(f/4),_=c+c,g=r.sa();for(g[c]=new ImageData(s.subarray(0,f),c,c),g[_]=new ImageData(s.subarray(f),_,_),t[n]=g,o=e[n],delete e[n],u=0,l=o.length;u<l;u++)a.ys(o[u],n,true)})(this.response)},i.send()},l.mc._c=function(n){var i,o,u;if(null==n)return!!t;if(n){if(!t)for(o in t=[null,null,null],e=r.sa(),i=a.Ac())0!==(u=i[+o][0].s).s&&a.ys(u.t,u.s)}else t&&setTimeout(function(){l.Nc("showActionIcon")||(t=null,e=null)},200)},a.ys=function(n,i,o){var l,s,f;(l=t[i])?(s=chrome.browserAction.setIcon,f={tabId:n,imageData:l},o?s(f,r.go):s(f)):e[i]?e[i].push(n):(setTimeout(u,0,i),e[i]=[n])},l.Uc.showActionIcon=function(t){o(t),l.mc._c(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),chrome.browserAction.setTitle({title:e})},l.$c("showActionIcon"))}),r.yt(600,function(){function t(){v&&(v.xg=null),S=U=v=_=null,p&&clearTimeout(p),h&&clearTimeout(h),y=T=w=p=h=0,g="",r.$r()}function n(){var e=Date.now()-y;if(e>5e3||e<-5e3)return t();p=setTimeout(n,3e4)}function e(){var t,n;if(h=0,(t=v)&&!t.Cg)return v=null,t.xg?((n=Date.now())<y&&(y=n-1e3),o(t.ct,t.xg)):void 0}function i(t,n,e,i,o){var u,l,s,f,a,d,h,B,p,y,k,x,C,R,M,E,O;if(t.xg){for(v=null,l=(u=n.length>0)?n[0]:null,f={},T=i,w=o,u&&(c||null!=n[0].s)&&(S=r.sa()),U=[],a=r.sa(),d=0,h=e?0:1,B=n.length;d<B;d++)y=(p=n[d]).title,k=p.u,x=p.e,C="",R=null!=p.s,M=c&&!(e&&0===d)&&("tab"===x?p.s!==m.ml:"history"===x&&!R),k in a?k=":"+(d+h)+" "+k:a[k]=1,M&&(f.Y_=x,C=" ~"+(d+h)+"~"),E={content:k,description:C="<url>"+p.textSplit+(C=y?"</url><dim> - "+y+C+"</dim>":C?"</url><dim>"+C+"</dim>":"</url>")},M&&(E.deletable=true),R&&(f.Rg=p.s),(M||R)&&(S[k]=f,f={}),U.push(E);if(_=t.ct,e)if("search"===l.e){if(s=((O=l.p)&&"<dim>"+r.ta(O)+" - </dim>")+"<url>"+l.textSplit+"</url>",b=2,l=n[1])switch(l.e){case"math":U[1].description="<dim>"+l.textSplit+" = </dim><url><match>"+l.t+"</match></url>"}}else b=3,s=U[0].description;else 1!==b&&(s="<dim>Open: </dim><url>%s</url>",b=1);e&&(g=n[0].u,U.shift()),s&&chrome.omnibox.setDefaultSuggestion({description:s}),t.xg(U),r.$r()}else v===t&&(v=null)}function o(t,o){var u,s,f,c;t=t.trim().replace(r.da," "),v&&(v.xg=(u=t===v.ct)?o:null,u)||(t!==_?1===T&&t.startsWith(_)?o([]):(v={xg:o,ct:t,Cg:false},h||(s=Date.now(),(f=l.Tc.t+y-s)>30&&f<3e3?h=setTimeout(e,f):(v.Cg=true,p||(p=setTimeout(n,3e4)),y=s,S=U=null,g="",c=T<2||!t.startsWith(_)?0:3===T?t.includes(" ")?0:8:w,d.Ps(t,{o:"omni",t:c,r:k,c:B,f:1},i.bind(null,v))))):U&&o(U))}function u(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.ba(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.Ja(t)),null!=e?a.Us({s:e}):a.kr({u:t,o:true,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2})}var s,c,_,g,v,h,S,B,U,p,y,b,T,w,k,x=chrome.omnibox;x&&(c=!!(s=x.onDeleteSuggestion)&&"function"==typeof s.addListener,_=null,g="",v=null,h=0,S=null,B=128,U=null,p=0,b=0,T=0,w=0,k=f<60?6:12,x.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;B=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),p)return t()}),x.onInputChanged.addListener(o),x.onInputEntered.addListener(function n(i,o){var l,s=v;if(s&&s.xg){if(s.xg=n.bind(null,i,o),s.Cg)return;return h&&clearTimeout(h),e()}return i=i.trim().replace(r.da," "),null===_&&i?d.Ps(i,{o:"omni",t:0,r:3,c:B,f:1},function(t,n){return n?u(t[0].u,o,t[0].s):u(i,o)}):(g&&i===_&&(i=g),l=S&&S[i]&&S[i].Rg,t(),u(i,o,l))}),c&&s.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=U&&U[n].content,i=e&&S&&S[e],r=i&&i.Y_;if(r)return":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.zs({t:r,u:"tab"===r?i.Rg:e});console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),chrome.runtime.onInstalled.addListener(l.mc.pc=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}setTimeout(function(){var i,o;chrome.tabs.query({status:"complete"},function(t){var n,e,i,o,u,s=chrome.tabs,f=r.go,a=location.origin.length,_=l.aa.jl;for(n=t.length,e=_.length-1;0<=--n;)if(!(i=t[n].url).startsWith(v)&&i.includes("://")&&!i.startsWith("edge"))for(o=t[n].id,u=0;u<e;++u)s.executeScript(o,{file:_[u].slice(a),allFrames:true},f)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,19).replace("T"," "),"color:auto"),l.aa.Ul&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e&&(parseFloat(l.aa.Gc)<=parseFloat(e)||((i=l.mc).hc?i.hc(6e3):i.hc=true,l.Nc("notifyUpdate")&&(e="vimium_c-upgrade-notification",o={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.aa.ql])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(o.isClickable=true),f>=70&&(o.silent=true),chrome.notifications&&chrome.notifications.create(e,o,function(t){var n;if(n=r.go())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.xr({u:r.ba("vimium://release")}))})}))))},500)}),r.sc=function(t){function n(){if(Math.abs(performance.now()-e)<1e5)i=setTimeout(n,3e5);else{i=0;var t=l.Uc;Commands&&(t.keyMappings=null,Commands=null),Exclusions&&Exclusions.As.length<=0&&(t.exclusionRules=t.exclusionOnlyFirstMatch=t.exclusionListenHash=null,Exclusions=null)}}var e=0,i=0,o=0;return r.sc=function(t){t&&(o=o+t>0?o+t:0),o>0||!Commands||!Exclusions||Exclusions.As.length>0?i&&(clearTimeout(i),i=0):(e=performance.now(),i=i||setTimeout(n,3e5))},r.sc(t)},r.yt(1200,function(){chrome.runtime.onInstalled.removeListener(l.mc.pc),l.mc.pc=null,document.documentElement.innerText="",r.$r()});